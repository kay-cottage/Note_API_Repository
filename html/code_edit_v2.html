<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 增量代码编辑器</title>
    <!-- Tailwind CSS (Production build via CDN) -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.2/dist/tailwind.min.css" rel="stylesheet" integrity="sha384-+X3g1Dnpk6oE9T4eTRWlvJfZOdOQ9gQb9M8bXjJ+i0jW6V+E3u6mK0qJ/1RYNUkR" crossorigin="anonymous">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-6nrpVfrV+zYgRv1+Vq0Lf+Z7iQWkxVJZfQzMEyD0QOj1pjcxslXqZAk/pVbr3YTvL4onD3+G0VM3OtCWyhX/YA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* Custom styles for a modern, clean look */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            overflow: hidden;
        }
        .resizable-handle {
            cursor: col-resize;
            width: 8px;
            background-color: #374151; /* gray-700 */
            transition: background-color 0.2s;
            flex-shrink: 0;
        }
        .resizable-handle:hover {
            background-color: #4f46e5; /* indigo-600 */
        }
        .code-editor {
            font-family: 'Courier New', Courier, monospace;
            background-color: #1e1e1e;
            color: #d4d4d4;
            border: 1px solid #374151; /* gray-700 */
            border-radius: 8px;
            padding: 16px;
            width: 100%;
            height: 100%;
            resize: none;
            outline: none;
            line-height: 1.5;
        }
        .code-editor:focus {
            border-color: #4f46e5; /* indigo-600 */
            box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.5);
        }
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            border: 1px solid transparent;
        }
        .btn-primary {
            @apply bg-indigo-600 text-white hover:bg-indigo-700;
        }
        .btn-secondary {
            @apply bg-gray-600 text-white hover:bg-gray-700;
        }
        .settings-panel, .left-panel-content {
            @apply transition-all ease-in-out duration-300;
        }
        .left-panel.collapsed .left-panel-content {
            @apply hidden;
        }
        .left-panel.collapsed {
            width: 40px !important;
            min-width: 40px !important;
        }
        .toast {
            @apply fixed bottom-5 left-1/2 transform -translate-x-1/2 p-3 rounded-lg text-white z-50 opacity-0 transition-opacity transition-transform;
        }
        .toast.show {
            @apply opacity-100 -translate-y-2;
        }
        .toast.success { @apply bg-green-500; }
        .toast.error { @apply bg-red-500; }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 h-screen flex flex-col">

    <!-- Main Content -->
    <div id="main-container" class="flex flex-1 overflow-hidden">

        <!-- Left Panel -->
        <div id="left-panel" class="left-panel flex flex-col h-full bg-gray-800 p-2" style="width: 40%; min-width: 300px;">
            <button id="toggle-left-panel" class="absolute top-2 right-[-30px] z-10 bg-gray-700 hover:bg-indigo-600 text-white p-2 rounded-r-lg">
                <i class="fas fa-chevron-left"></i>
            </button>
            <div class="left-panel-content flex flex-col h-full space-y-4">
                <!-- Settings -->
                <div class="settings-panel border border-gray-700 rounded-lg">
                    <button id="toggle-settings" class="w-full text-left p-3 bg-gray-700 hover:bg-gray-600 rounded-t-lg flex justify-between items-center">
                        <span><i class="fas fa-cog mr-2"></i>基础设置</span>
                        <i id="settings-chevron" class="fas fa-chevron-down transition-transform"></i>
                    </button>
                    <div id="settings-content" class="p-4 space-y-3 overflow-hidden max-h-0">
                        <!-- ... settings content ... -->
                    </div>
                </div>

                <!-- Left Code Editor -->
                <div class="flex-1 flex flex-col min-h-0">
                    <label class="font-semibold mb-2">原始代码输入区</label>
                    <textarea id="editor-left" class="code-editor" placeholder="在此处粘贴你的原始代码..."></textarea>
                </div>

                <!-- User Request Input -->
                <div class="flex flex-col">
                    <label for="user-request" class="font-semibold mb-2">代码修改需求</label>
                    <textarea id="user-request" class="bg-gray-700 border border-gray-600 rounded-md p-3 mb-3 focus:ring-indigo-500 focus:border-indigo-500" rows="3" placeholder="例如：将所有注释翻译成中文"></textarea>
                    <button id="generate-btn" class="btn btn-primary w-full">
                        <i class="fas fa-magic mr-2"></i>
                        <span id="generate-btn-text">生成修改</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Resizable Handle -->
        <div id="resizable-handle" class="resizable-handle"></div>

        <!-- Right Panel -->
        <div id="right-panel" class="flex-1 flex flex-col h-full bg-gray-800 p-4 space-y-3">
            <div class="flex justify-between items-center">
                <h2 class="text-lg font-semibold">编辑后代码（可直接修改）</h2>
                <div class="flex items-center space-x-3">
                    <div class="relative">
                        <select id="history-select" class="bg-gray-700 border border-gray-600 rounded-md p-2 pr-8 appearance-none focus:ring-indigo-500 focus:border-indigo-500 cursor-pointer">
                            <option value="-1">历史版本</option>
                        
